<!-- Home page for our human adaptor -->
{% extends "base.html" %}
{% set active_page = "index" %}
{% block scripts %}
    {{ super() }}
    <script type="text/babel" src="/static/js/scenarios.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <!-- THIS JS IS USED TO TAKE SCREENSHOT -->
    <script type="text/javascript" src='/static/bower_components/html2canvas/build/html2canvas.min.js' type='text/javascript'></script>
    <!-- THIS JS IS USED FOR 2D map polygon -->
    <script type="text/javascript" src="/static/js/vis/draw_polygon_on_map.js"></script>
    <!-- THIS JS IS an AWESOME COLOR LIB, SHOULD BE PUT IN BOWER  -->
    <script type="text/javascript" src="/static/js/vis/chroma.js"></script>
    <!-- THIS JS IS USED FOR 2D map overlay on Google Map -->
    <script type="text/javascript" src="/static/js/vis/overlay_google_map.js"></script>
{% endblock %}
{% block link %}
    {{ super() }}
{% endblock %}
{% block head_ext %}
    {{ super() }}
    <style>
    #map {
        width: 90%;
        height: 350px;
        margin: 20px auto;
    }
    #new-scenario-menu-content {
        position: relative;
    }
    #scenario-list {
        display: table;
    }
    .section-header {
        text-decoration: underline;
    }
    .btn-custom {
        border-color: #dfd7ca;
        border-width: 2px;
        border-style: solid;
    }
    .btn-custom.active {
        background-color: #f8f5f0;
    }
    .btn-custom:hover {
        background-color: #f8f5f0;
        color: #3e3f3a;
    }
    #vegetation-type-selector {
        margin: 15px;
    }
    label {
        display: block;
    }
    a.remove-veg-update:hover {
        cursor: pointer;
    }
    </style>
{% endblock %}

{% block content %}
<div class="container">


    <div class="row">
        <h2>Instructions</h2>
        <p>
            This tool allows you to run various PRMS scenarios for 
            vegetation states. First, select the grid cells you want to change
            to another vegetation type. Then, select which vegetation type you
            wish to apply to the map. 
        </p>
    </div>


    <div class="row">
        <h3 class="section-header">Create a New Scenario</h3>
        <h4>1. Select Vegetation Type</h4>
        {% include 'includes/veg-type-selector.html' %}
        <!-- Enable users to change color -->
        <!-- <h5>You can set a different color scale from here</h5> -->
        <!-- Using js from http://gka.github.io/chroma.js/ -->
        {% include 'includes/color-panel.html' %}
    </div>


    <div class="row">
        <h4>2. Select HRU on map for the selected vegetation type then save to persist the change</h4>
        <h5>(Repeat 1 & 2 to add more vegetation updates)</h5>


        <div id="new-scenario-top" align="center"
             class="row">

            <button class="btn btn-default" id="save-veg-update" style="width: 70%">
                Modify Vegetation Region
            </button>

            <div id="veg-update-list"></div>
        </div>


        <div id="maps" class="row">

            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" >
              <canvas class='mapCanvas' id="myCanvas" style="border:1px solid #c3c3c3;" >
                Your browser does not support the HTML5 canvas tag.
              </canvas>
            </div>

            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" >

              <div id='buttonDiv'>
                <input type="button" id="resetCanvasButton" value="Reset Polygon" />
                <input type="button" id="submitChangetoServerButton" value="Submit Change to the Server" />
              </div>

              <div id='mapControl'>
                <input type="button" id="removeOverlayButton" value="Remove the overlay image" />
                <input type="button" id="addOverlayButton" value="add the overlay image" />
                <p>
                    This is for opacity rate. It should be between 0 to 1.
                    <input type="number" min="0.0" max="1.0" step="0.1" id="opacitySelectorID">
                    <input type="button" id="changeOpacityButton" value="Confirm Opacity" />
                </p>
              </div>
            </div>

            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
              <div id='googleMapDiv' style="width:800px;height:600px;">

              </div>
            </div>

        </div>

    </div>


    <h4>4. Enter a scenario name</h4>
    <div class="row" 
            id="new-scenario-menu" align="center">
        <div style="width:70%" align="left">
            <label for="scenario-name">Scenario Name</label>
            <div align="center">
                <input type="text" name="scenario-name" 
                       style="width:100%; margin-bottom: 15px;"
                       id="scenario-name-input"
                       placeholder="Use a descriptive name, e.g., Flood Event, Severe Drought, etc." 
                       required />
            </div>
        </div>
    </div>


    <h4>5. Run the scenario</h4>
    <h5>The result will show in the list below when it's finished</h5>
    <div class="row" align="center">
        <button class="btn btn-default" style="width: 70%; margin-top: 15px;">
            Run Scenario
        </button>
    </div>

    <div class="row">
        <h3 class="section-header">List of Completed Scenarios</h3>
        <div id="scenario-list"></div>
    </div>


</div>

<!--End of Form-->

    <script src="https://maps.googleapis.com/maps/api/js"
         async defer></script>

<script type="text/babel">
ReactDOM.render(
    <ScenarioListBox pollInterval={2000} />,
    document.getElementById('scenario-list')
);
</script>
{% endblock %}
